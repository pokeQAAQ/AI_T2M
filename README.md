# AI语音生图应用 - Orange Pi Zero 3 版本

基于语音识别和AI图像生成的智能应用，专为Orange Pi Zero 3（1GB内存，16GB TF卡，1024x600分辨率）优化设计。

## 功能特性

- 🎤 **语音录制与识别**：支持语音转文字，智能提取图像描述
- 🎨 **多样风格选择**：提供多种预设的艺术风格和画面风格
- 🖼️ **AI图像生成**：基于语音描述和选定风格生成高质量图像
- 💫 **深色主题**：专为1024x600横屏设计的现代化深色界面
- 📱 **触屏友好**：优化的按钮尺寸和布局，适合触屏操作

## 界面设计

### 1. 风格选择界面
- 多种预设艺术风格可选
- 直观的风格预览和选择
- 美观的网格布局设计

### 2. 语音识别界面
- 语音录制功能
- 实时语音转文字显示
- 清晰的录音状态反馈

### 3. 图像展示界面
- 生成图像的展示
- 支持重新生成功能
- 便捷的返回和导航操作

## 安装和运行

### 环境要求
- Python 3.8+
- Orange Pi Zero 3 或兼容的ARM64设备
- 网络连接（用于API调用和音频流播放）

### 安装依赖
```bash
pip install -r requirements.txt
```

### 配置文件
应用使用`utils/config.py`文件进行配置，其中包含：
- API凭据配置
- 图像风格和样式选项
- UI主题配置
- 音频参数设置

### 运行应用
```bash
# 启动应用（需要图形界面）
python main.py
```

## 文件结构

```
AI_T2M/
├── main.py                    # 主应用程序入口
├── main_window.py             # 主窗口管理器
├── requirements.txt          # Python依赖
├── pages/                    # 应用页面模块
│   ├── style_selector.py    # 风格选择页面
│   ├── voice_recognition.py # 语音识别页面
│   └── image_display.py     # 图像展示页面
├── threads/                 # 线程模块
│   ├── record_thread.py     # 录音线程
│   └── asr_thread.py        # 语音识别线程
├── styles/                  # 界面样式模块
│   └── app_styles.py        # 应用样式定义
├── widgets/                 # 自定义组件
│   └── loading_widget.py    # 加载动画组件
├── utils/                   # 工具模块
│   └── config.py            # 配置管理
├── Icon/                    # 图标资源
│   ├── button.png           # 录音按钮图标
│   └── loading.gif          # 加载动画
└── image/                   # 图像资源
    └── styles/              # 风格预览图片
```

## API集成

### 语音识别和图像生成
- **语音识别**：将录音转换为文字描述
- **图像生成**：基于文字描述和风格生成图像
- **多风格支持**：支持多种艺术风格的图像生成

### 支持的功能
- **语音输入**：支持多种语音格式的录制和识别
- **风格选择**：多种预设艺术风格可选
- **图像展示**：高质量图像展示和管理

## 硬件优化

针对Orange Pi Zero 3的优化：
- 使用软件渲染减少GPU负担
- 优化内存使用，适配1GB RAM限制
- 异步处理避免界面卡顿
- 缓存机制减少重复网络请求
- 适配1024x600分辨率的UI布局

## 安全性

- API密钥通过配置文件管理，已加入.gitignore
- 使用HMAC-SHA256签名确保API请求安全
- 临时文件自动清理
- 网络请求超时和重试机制

## 故障排除

### 常见问题

1. **录音失败**
   - 检查音频设备权限
   - 确认alsa-utils已安装（用于arecord）
   - 检查麦克风硬件连接

2. **图像生成失败**
   - 验证网络连接
   - 检查API配置
   - 查看日志文件（/tmp/ai_voice_image.log）

3. **界面显示问题**
   - 确认分辨率设置为1024x600
   - 检查PySide6安装和图形系统支持
   - 尝试使用不同的Qt后端

### 日志文件
- 应用日志：`/tmp/ai_voice_image.log`

## 开发和定制

### 扩展功能
- 添加更多图像生成风格
- 集成更多语音识别引擎
- 实现图像编辑和后处理功能
- 添加图像保存和分享功能

### 主题定制
编辑`styles/app_styles.py`中的样式定义来自定义颜色方案。

### API扩展
在相应模块中可以添加更多AI服务API的支持。

## 许可证

本项目遵循原始仓库的许可证条款。AI服务API的使用需要遵循相应的服务条款。

## 支持

如有问题或建议，请查看：
1. 日志文件中的错误信息
2. 确认硬件和网络环境符合要求